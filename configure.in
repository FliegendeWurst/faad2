AC_INIT()
AM_INIT_AUTOMAKE(faad,2.0)

AC_PROG_CC
AM_PROG_LIBTOOL
AC_SUBST(LIBTOOL_DEPS)

dnl Checks for programs.
AC_PROG_CXX
AC_PROG_AWK
AC_PROG_CC
AC_PROG_CPP
AC_PROG_INSTALL
AC_PROG_LN_S
AC_PROG_MAKE_SET
AC_PROG_RANLIB

dnl Checks for header files required for mp4.h
AC_CHECK_HEADERS(stdint.h inttypes.h)

dnl Checks for sndfile library.
AC_CHECK_LIB(sndfile, sf_perror, have_sndfile_lib=yes)
AC_CHECK_HEADER(sndfile.h, have_sndfile_hdr=yes)

if test x$have_sndfile_lib != xyes -o x$have_sndfile_hdr != xyes; then
AC_MSG_ERROR([
  *** FAAD requires libsndfile to be installed first.
  *** A copy of it is included in common/libsndfile.
  ])
fi

AC_OUTPUT_COMMANDS(,[cd common/mp4v2; aclocal -I .; autoheader; libtoolize --automake; automake --add-missing; autoconf; cd -])

AC_CONFIG_SUBDIRS(common/mp4v2)

AC_OUTPUT(libfaad/Makefile common/Makefile  frontend/Makefile Makefile)
